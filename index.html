<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9A5 - CU·ªêN G√å C≈®NG D√çNH | THCS Nguy·ªÖn Gia Thi·ªÅu</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <style>
        @font-face {
            font-family: 'BoleroesqueHonora';
            src: url('Boleroesque-Honora-by-Josh-Manh-Nguyen.otf') format('opentype');
            font-weight: normal; font-style: normal; font-display: swap;
        }

        :root {
            --primary: #2d5a27; 
            --secondary: #f39c12;
            --light: #fdfaf5;
            --dark: #1e391a;
        }

        * { box-sizing: border-box; scroll-behavior: smooth; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background-color: var(--light); color: var(--dark); overflow-x: hidden; }

        h1, h2, .modal-title { font-family: 'BoleroesqueHonora', serif; font-weight: normal; }

        /* THANH ƒêI·ªÄU H∆Ø·ªöNG G√ìC PH·∫¢I (User Menu) */
        .top-nav {
            position: fixed; top: 20px; right: 20px; z-index: 1001;
            display: flex; gap: 10px; align-items: center;
        }
        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            color: white; padding: 10px 20px; border-radius: 50px;
            text-decoration: none; font-weight: bold; transition: 0.3s;
            cursor: pointer; font-size: 0.9rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .nav-btn:hover { background: var(--secondary); border-color: var(--secondary); color: white; }
        
        /* Giao di·ªán User khi ƒë√£ ƒëƒÉng nh·∫≠p */
        #user-area {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            align-items: center; gap: 10px;
            background: rgba(0,0,0,0.6); padding: 5px 15px 5px 5px;
            border-radius: 50px; backdrop-filter: blur(5px);
        }
        #user-avatar { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--secondary); object-fit: cover; }
        #user-name { color: white; font-weight: bold; font-size: 0.9rem; max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
        .logout-btn { background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; margin-left: 5px; }
        .logout-btn:hover { background: #c0392b; }

        /* HERO SECTION */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                        url('https://cdn.netspace.edu.vn/images/2020/04/25/cach-lam-goi-cuon-tom-thit-cuc-ki-hap-dan-245587-800.jpg') center/cover;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: white; padding: 20px;
        }
        .hero h1 { font-size: 5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .hero p { font-size: 1.5rem; margin-bottom: 30px; }
        
        .info-badge {
            background: rgba(255, 255, 255, 0.2); padding: 10px 20px; border-radius: 50px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);
            margin-bottom: 20px; color: white; font-weight: bold;
        }

        .container { max-width: 1100px; margin: auto; padding: 60px 20px; }
        .section-title { text-align: center; margin-bottom: 40px; }
        .section-title h2 { font-size: 3.5rem; color: var(--primary); display: inline-block; border-bottom: 3px solid var(--secondary); padding-bottom: 10px; }
        .intro-text { text-align: center; font-size: 1.2rem; line-height: 1.8; max-width: 800px; margin: auto; }

        /* MENU CARDS */
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 40px; }
        .card { background: white; border-radius: 20px; padding: 30px; text-align: center; box-shadow: 0 10px 20px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s; border: 1px solid #eee; }
        .card:hover { transform: translateY(-10px); border-color: var(--secondary); background: #fffdf9; }
        .card h3 { color: var(--primary); font-size: 1.6rem; margin-bottom: 10px; }
        .card-price { color: var(--secondary); font-weight: bold; font-size: 1.4rem; }

        /* HIGHLIGHTS */
        .highlights { background: var(--primary); color: white; padding: 80px 20px; text-align: center; }
        .highlight-grid { display: grid; grid-template-columns: repeat(3, 1fr); max-width: 1000px; margin: 40px auto 0; gap: 30px; }
        .h-item i { font-size: 2.5rem; color: var(--secondary); margin-bottom: 15px; display: block; }

        /* MODAL CHUNG */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 1100; backdrop-filter: blur(8px); }
        .modal-content { background: white; width: 90%; max-width: 800px; border-radius: 30px; display: flex; overflow: hidden; position: relative; animation: zoomIn 0.3s; }
        .modal-img { width: 50%; object-fit: cover; background: #eee; min-height: 300px; }
        .modal-info { width: 50%; padding: 40px; display: flex; flex-direction: column; justify-content: center; }
        .modal-title { font-size: 3rem; color: var(--primary); margin-bottom: 15px; line-height: 1; }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 2.5rem; cursor: pointer; color: #333; z-index: 10; }

        .btn { padding: 15px 35px; background: var(--secondary); color: white; text-decoration: none; border-radius: 50px; font-weight: bold; display: inline-block; transition: 0.3s; border: none; cursor: pointer; }
        .btn:hover { transform: scale(1.05); background: #e67e22; }

        @media (max-width: 768px) {
            .hero h1 { font-size: 3.5rem; }
            .modal-content { flex-direction: column; max-height: 90vh; overflow-y: auto; }
            .modal-img, .modal-info { width: 100%; }
            .highlight-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <nav class="top-nav">
        <div id="user-area">
            <img id="user-avatar" src="" alt="Avatar">
            <span id="user-name"></span>
            <button class="logout-btn" onclick="handleLogout()">ƒêƒÉng xu·∫•t</button>
        </div>
        
        <div id="auth-buttons" style="display: flex; gap: 10px;">
            <button class="nav-btn" onclick="openLoginModal('login')">ƒêƒÉng nh·∫≠p</button>
            <button class="nav-btn" onclick="openLoginModal('register')" style="background: var(--secondary); border-color: var(--secondary);">ƒêƒÉng k√Ω</button>
        </div>
    </nav>

    <section class="hero">
        <div class="info-badge">THCS NGUY·ªÑN GIA THI·ªÄU ‚Ä¢ 06.02.2026</div>
        <h1 class="animate__animated animate__fadeInDown">9A5 - CU·ªêN G√å C≈®NG D√çNH</h1>
        <p class="animate__animated animate__fadeInUp">"Xu√¢n c√≥ h·ªôi, 9A5 c√≥ G·ªèi. Cu·ªën bao d√≠nh, ƒÇn l√† ghi·ªÅn!"</p>
        <a href="#menu" class="btn">KH√ÅM PH√Å TH·ª∞C ƒê∆†N</a>
    </section>

    <div class="container">
        <div class="section-title"><h2>G√≥i Tr·ªçn V·ªã Xu√¢n</h2></div>
        <div class="intro-text">
            <p>Ch√†o c√°c b·∫°n h·ªçc sinh Nguy·ªÖn Gia Thi·ªÅu! B·∫°n mu·ªën ƒÉn ngon nh∆∞ng l·∫°i s·ª£ b√©o hay n·ªïi m·ª•n? Gh√© ngay 9A5 nh√©! Ch√∫ng m√¨nh mang ƒë·∫øn th·ª±c ƒë∆°n G·ªèi Cu·ªën thanh m√°t, nguy√™n li·ªáu t∆∞∆°i s·∫°ch 100%, chu·∫©n v·ªã "nh√† l√†m".</p>
        </div>
    </div>

    <section id="menu" style="background: #fff; padding: 40px 0;">
        <div class="container">
            <div class="section-title"><h2>Th·ª±c ƒê∆°n Ng≈© S·∫Øc</h2></div>
            <div class="menu-grid">
                <div class="card" onclick="showDetail('tom-thit')"><h3>G·ªèi Cu·ªën T√¥m Th·ªãt</h3><div class="card-price">5.000ƒë</div></div>
                <div class="card" onclick="showDetail('nem-nuong')"><h3>G·ªèi Cu·ªën Nem N∆∞·ªõng</h3><div class="card-price">5.000ƒë</div></div>
                <div class="card" onclick="showDetail('bi')"><h3>G·ªèi Cu·ªën B√¨</h3><div class="card-price">5.000ƒë</div></div>
                <div class="card" onclick="showDetail('trung')"><h3>G·ªèi Cu·ªën Tr·ª©ng</h3><div class="card-price">5.000ƒë</div></div>
                <div class="card" onclick="showDetail('tai-heo')"><h3>G·ªèi Cu·ªën Tai Heo</h3><div class="card-price">5.000ƒë</div></div>
            </div>
        </div>
    </section>

    <section class="highlights">
        <div class="container">
            <div class="section-title"><h2 style="color: white; border-bottom-color: white;">T·∫°i sao ch·ªçn 9A5?</h2></div>
            <div class="highlight-grid">
                <div class="h-item"><i class="fas fa-leaf"></i><h3>T∆Ø∆†I S·∫†CH</h3><p>Nguy√™n li·ªáu t∆∞∆°i ngon trong ng√†y.</p></div>
                <div class="h-item"><i class="fas fa-mortar-pestle"></i><h3>S·ªêT B√ç TRUY·ªÄN</h3><p>C√¥ng th·ª©c ƒë·ªôc quy·ªÅn si√™u d√≠nh.</p></div>
                <div class="h-item"><i class="fas fa-camera-retro"></i><h3>VIEW ƒê·∫∏P</h3><p>Check-in m·∫πt tre l√° chu·ªëi c·ª±c xinh.</p></div>
            </div>
        </div>
    </section>

    <div class="modal-overlay" id="login-modal">
        <div class="modal-content" style="max-width: 400px; padding: 30px; flex-direction: column;">
            <span class="close-btn" onclick="toggleLoginModal()">&times;</span>
            <h2 id="auth-title" style="text-align: center; margin-bottom: 20px; color: var(--primary);">ƒêƒÉng nh·∫≠p</h2>
            
            <div id="register-fields" style="display: none;">
                <input type="text" id="reg-name" placeholder="H·ªç v√† t√™n c·ªßa b·∫°n" style="width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ddd;">
            </div>
            <input type="email" id="auth-email" placeholder="Email" style="width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ddd;">
            <input type="password" id="auth-pass" placeholder="M·∫≠t kh·∫©u" style="width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ddd;">
            
            <button id="auth-submit" class="btn" onclick="handleManualAuth()" style="width: 100%; margin-bottom: 15px;">ƒêƒÇNG NH·∫¨P</button>
            
            <div style="text-align: center; margin: 10px 0; color: #777; position: relative;">
                <span style="background: #fff; padding: 0 10px; position: relative; z-index: 1;">Ho·∫∑c</span>
                <hr style="position: absolute; top: 50%; width: 100%; border: 0; border-top: 1px solid #eee;">
            </div>

            <div id="buttonDiv" style="display: flex; justify-content: center;"></div>
            
            <p style="text-align: center; margin-top: 20px; font-size: 0.9rem;">
                <span id="auth-switch-text">Ch∆∞a c√≥ t√†i kho·∫£n?</span> 
                <a href="javascript:void(0)" onclick="switchAuthMode()" id="auth-link" style="color: var(--secondary); font-weight: bold; text-decoration: none;">ƒêƒÉng k√Ω ngay</a>
            </p>
        </div>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <img src="" alt="M√≥n ƒÉn" class="modal-img" id="modal-img">
            <div class="modal-info">
                <div class="modal-title" id="modal-title"></div>
                <p class="modal-desc" id="modal-desc"></p>
                <div class="card-price" id="modal-price" style="font-size: 2rem;"></div>
            </div>
        </div>
    </div>

    <footer style="text-align: center; padding: 60px 20px; background: #eee;">
        <p><strong>L·ªöP 9A5 - GIAN H√ÄNG S·ªê 04</strong></p>
        <p>H·ªôi Xu√¢n THCS Nguy·ªÖn Gia Thi·ªÅu ‚Ä¢ 06.02.2026</p>
    </footer>

    <!-- <script>
        // --- LOGIC GIAO DI·ªÜN M√ìN ƒÇN ---
        const menuData = {
            'tom-thit': { title: 'G·ªèi Cu·ªën T√¥m Th·ªãt', desc: 'T√¥m th·ªãt t∆∞∆°i ngon, ch·∫•m t∆∞∆°ng ƒëen.', price: '5.000ƒë', img: 'https://cdn.tgdd.vn/Files/2021/10/21/1392444/tong-hop-8-cach-lam-goi-cuon-ngon-hap-dan-sieu-de-lam-tai-nha-202110211125270560.jpg' },
            'nem-nuong': { title: 'G·ªèi Cu·ªën Nem N∆∞·ªõng', desc: 'Nem n∆∞·ªõng th∆°m l·ª´ng, ch·∫•m n∆∞·ªõc m·∫Øm chua ng·ªçt.', price: '5.000ƒë', img: 'https://nemnuonghungviet.com/nemhungviet/uploads/2024/12/goi-cuon-nem-nuong.jpg' },
            'bi': { title: 'G·ªèi Cu·ªën B√¨', desc: 'B√¨ heo dai gi√≤n, th√≠nh g·∫°o th∆°m ph·ª©c.', price: '5.000ƒë', img: 'https://afamilycdn.com/thumb_w/650/150157425591193600/2021/3/19/bi-cuon99-1-1616150003378626234564.jpg' },
            'trung': { title: 'G·ªèi Cu·ªën Tr·ª©ng', desc: 'Tr·ª©ng chi√™n v√†ng ∆∞∆°m, thanh m√°t.', price: '5.000ƒë', img: 'https://image.eatencdn.com/image/801b0cd5-3da6-4413-9265-7fad9189eb13/small/image.jpg' },
            'tai-heo': { title: 'G·ªèi Cu·ªën Tai Heo', desc: 'Tai heo gi√≤n s·∫ßn s·∫≠t, ch·∫•m m·∫Øm n√™m.', price: '5.000ƒë', img: 'https://cdn2.fptshop.com.vn/unsafe/1920x0/filters:format(webp):quality(75)/2024_1_20_638413447115599304_tai-heo-cuon-banh-trang.jpg' }
        };

        function showDetail(id) {
            const item = menuData[id];
            if(!item) return;
            document.getElementById('modal-title').innerText = item.title;
            document.getElementById('modal-desc').innerText = item.desc;
            document.getElementById('modal-price').innerText = item.price;
            document.getElementById('modal-img').src = item.img;
            document.getElementById('modal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // --- LOGIC AUTHENTICATION (QUAN TR·ªåNG) ---
        let currentMode = 'login';
        
        // Ki·ªÉm tra xem ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a khi load trang
        window.onload = function () {
            checkLoginState();
            
            // Kh·ªüi t·∫°o Google Button
            google.accounts.id.initialize({
                client_id: "841259510226-c0lbbdn4vp2ummrcrsa9tups6d2mon4v.apps.googleusercontent.com", 
                callback: handleCredentialResponse
            });
            google.accounts.id.renderButton(
                document.getElementById("buttonDiv"),
                { theme: "outline", size: "large", width: "250" } 
            );
        };

        function checkLoginState() {
            const user = JSON.parse(localStorage.getItem('user_9a5'));
            if (user) {
                showUserArea(user);
            } else {
                showAuthButtons();
            }
        }

        function showUserArea(user) {
            document.getElementById('auth-buttons').style.display = 'none';
            document.getElementById('user-area').style.display = 'flex';
            document.getElementById('user-name').innerText = user.name;
            document.getElementById('user-avatar').src = user.picture || 'https://cdn-icons-png.flaticon.com/512/149/149071.png';
        }

        function showAuthButtons() {
            document.getElementById('auth-buttons').style.display = 'flex';
            document.getElementById('user-area').style.display = 'none';
        }

        function handleLogout() {
            localStorage.removeItem('user_9a5'); // X√≥a d·ªØ li·ªáu l∆∞u trong m√°y
            alert("ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!");
            location.reload(); // T·∫£i l·∫°i trang
        }

        // X·ª≠ l√Ω khi ƒëƒÉng nh·∫≠p b·∫±ng Google th√†nh c√¥ng
        function handleCredentialResponse(response) {
            // Gi·∫£i m√£ Token ƒë·ªÉ l·∫•y t√™n v√† ·∫£nh
            const responsePayload = decodeJwtResponse(response.credential);
            
            const user = {
                name: responsePayload.name,
                picture: responsePayload.picture,
                email: responsePayload.email
            };

            // L∆∞u v√†o b·ªô nh·ªõ tr√¨nh duy·ªát
            localStorage.setItem('user_9a5', JSON.stringify(user));
            
            alert("Xin ch√†o " + user.name + "! üëã");
            toggleLoginModal();
            showUserArea(user);
        }

        // H√†m gi·∫£i m√£ JWT c·ªßa Google (ƒê·ªÉ l·∫•y t√™n th·∫≠t)
        function decodeJwtResponse(token) {
            var base64Url = token.split('.')[1];
            var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }

        // X·ª≠ l√Ω ƒêƒÉng k√Ω / ƒêƒÉng nh·∫≠p th·ªß c√¥ng (Gi·∫£ l·∫≠p)
        function handleManualAuth() {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;
            const name = document.getElementById('reg-name').value;

            if (!email || !pass) {
                alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
                return;
            }

            if (currentMode === 'register') {
                if (!name) { alert("Vui l√≤ng nh·∫≠p h·ªç t√™n!"); return; }
                
                // Gi·∫£ l·∫≠p ƒëƒÉng k√Ω th√†nh c√¥ng
                const user = { name: name, picture: '', email: email };
                localStorage.setItem('user_9a5', JSON.stringify(user));
                
                alert("ƒêƒÉng k√Ω th√†nh c√¥ng! Ch√†o m·ª´ng " + name);
                toggleLoginModal();
                showUserArea(user);
            } else {
                // Gi·∫£ l·∫≠p ƒëƒÉng nh·∫≠p (lu√¥n th√†nh c√¥ng v·ªõi m·ªçi email/pass ƒë·ªÉ test)
                // Th·ª±c t·∫ø c·∫ßn check Database, nh∆∞ng ·ªü ƒë√¢y ta cho qua ƒë·ªÉ demo
                const user = { name: "Th√†nh vi√™n 9A5", picture: '', email: email };
                localStorage.setItem('user_9a5', JSON.stringify(user));
                
                alert("ƒêƒÉng nh·∫≠p th√†nh c√¥ng!");
                toggleLoginModal();
                showUserArea(user);
            }
        }

        // --- C√ÅC H√ÄM POPUP C≈® ---
        function openLoginModal(mode) {
            currentMode = mode;
            updateAuthUI();
            document.getElementById('login-modal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function toggleLoginModal() {
            document.getElementById('login-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function switchAuthMode() {
            currentMode = (currentMode === 'login') ? 'register' : 'login';
            updateAuthUI();
        }

        function updateAuthUI() {
            const title = document.getElementById('auth-title');
            const submitBtn = document.getElementById('auth-submit');
            const registerFields = document.getElementById('register-fields');
            const switchText = document.getElementById('auth-switch-text');
            const authLink = document.getElementById('auth-link');

            if (currentMode === 'register') {
                title.innerText = "ƒêƒÉng k√Ω th√†nh vi√™n";
                submitBtn.innerText = "ƒêƒÇNG K√ù NGAY";
                registerFields.style.display = "block";
                switchText.innerText = "ƒê√£ c√≥ t√†i kho·∫£n?";
                authLink.innerText = "ƒêƒÉng nh·∫≠p ngay";
            } else {
                title.innerText = "ƒêƒÉng nh·∫≠p";
                submitBtn.innerText = "ƒêƒÇNG NH·∫¨P";
                registerFields.style.display = "none";
                switchText.innerText = "Ch∆∞a c√≥ t√†i kho·∫£n?";
                authLink.innerText = "ƒêƒÉng k√Ω ngay";
            }
        }

        window.onclick = function(event) {
            if (event.target == document.getElementById('modal')) closeModal();
            if (event.target == document.getElementById('login-modal')) toggleLoginModal();
        }
    </script> -->
    <script type="module">
    // 1. Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCg2qA0TODBVNpLCeX0zocuoSNsJTfztDE",
        authDomain: "hoixuan9a5.firebaseapp.com",
        databaseURL: "https://hoixuan9a5-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "hoixuan9a5",
        storageBucket: "hoixuan9a5.firebasestorage.app",
        messagingSenderId: "344769438813",
        appId: "1:344769438813:web:301866b870efc2df7fd9b4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // --- D·ªÆ LI·ªÜU M√ìN ƒÇN ---
    const menuData = {
        'tom-thit': { title: 'G·ªèi Cu·ªën T√¥m Th·ªãt', desc: 'T√¥m th·ªãt t∆∞∆°i ngon, ch·∫•m t∆∞∆°ng ƒëen.', price: '5.000ƒë', img: 'https://cdn.tgdd.vn/Files/2021/10/21/1392444/tong-hop-8-cach-lam-goi-cuon-ngon-hap-dan-sieu-de-lam-tai-nha-202110211125270560.jpg' },
        'nem-nuong': { title: 'G·ªèi Cu·ªën Nem N∆∞·ªõng', desc: 'Nem n∆∞·ªõng th∆°m l·ª´ng, ch·∫•m n∆∞·ªõc m·∫Øm chua ng·ªçt.', price: '5.000ƒë', img: 'https://nemnuonghungviet.com/nemhungviet/uploads/2024/12/goi-cuon-nem-nuong.jpg' },
        'bi': { title: 'G·ªèi Cu·ªën B√¨', desc: 'B√¨ heo dai gi√≤n, th√≠nh g·∫°o th∆°m ph·ª©c.', price: '5.000ƒë', img: 'https://afamilycdn.com/thumb_w/650/150157425591193600/2021/3/19/bi-cuon99-1-1616150003378626234564.jpg' },
        'trung': { title: 'G·ªèi Cu·ªën Tr·ª©ng', desc: 'Tr·ª©ng chi√™n v√†ng ∆∞∆°m, thanh m√°t.', price: '5.000ƒë', img: 'https://image.eatencdn.com/image/801b0cd5-3da6-4413-9265-7fad9189eb13/small/image.jpg' },
        'tai-heo': { title: 'G·ªèi Cu·ªën Tai Heo', desc: 'Tai heo gi√≤n s·∫ßn s·∫≠t, ch·∫•m m·∫Øm n√™m.', price: '5.000ƒë', img: 'https://cdn2.fptshop.com.vn/unsafe/1920x0/filters:format(webp):quality(75)/2024_1_20_638413447115599304_tai-heo-cuon-banh-trang.jpg' }
    };

    // --- C√ÅC H√ÄM C·∫¶N "PH∆†I" RA NGO√ÄI ƒê·ªÇ HTML D√ôNG ƒê∆Ø·ª¢C ---

    // 1. H√†m hi·ªán chi ti·∫øt m√≥n ƒÉn (S·ª≠a l·ªói b·∫°n ƒëang g·∫∑p)
    window.showDetail = function(id) {
        const item = menuData[id];
        if(!item) return;
        document.getElementById('modal-title').innerText = item.title;
        document.getElementById('modal-desc').innerText = item.desc;
        document.getElementById('modal-price').innerText = item.price;
        document.getElementById('modal-img').src = item.img;
        document.getElementById('modal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    };

    // 2. H√†m x·ª≠ l√Ω ƒëƒÉng k√Ω l∆∞u v√†o Firebase
    window.handleManualAuth = function() {
        const name = document.getElementById('reg-name').value;
        const email = document.getElementById('auth-email').value;
        const pass = document.getElementById('auth-pass').value;

        if (!email || !pass) {
            alert("Vui l√≤ng ƒëi·ªÅn ƒë·ªß email v√† m·∫≠t kh·∫©u!");
            return;
        }

        const userRef = ref(db, 'users');
        push(userRef, {
            fullname: name || "·∫®n danh",
            email: email,
            password: pass,
            time: new Date().toLocaleString()
        }).then(() => {
            alert("ƒêƒÉng k√Ω th√†nh c√¥ng v√† ƒë√£ l∆∞u v√†o Database!");
            localStorage.setItem('user_9a5', JSON.stringify({name: name || email}));
            location.reload();
        }).catch(err => alert("L·ªói Database: " + err.message));
    };

    // 3. H√†m ƒë√≥ng Modal
    window.closeModal = function() {
        document.getElementById('modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    };

    // 4. C√°c h√†m Google Login v√† Logout
    window.handleCredentialResponse = function(response) {
        const payload = JSON.parse(atob(response.credential.split('.')[1]));
        localStorage.setItem('user_9a5', JSON.stringify({name: payload.name}));
        location.reload();
    };

    window.logout = function() {
        localStorage.removeItem('user_9a5');
        location.reload();
    };

    // Kh·ªüi t·∫°o trang
    window.onload = function () {
        const user = JSON.parse(localStorage.getItem('user_9a5'));
        if(user) {
            document.getElementById('auth-buttons').innerHTML = `<span style="color:white; margin-right:10px;">Ch√†o ${user.name}</span><button onclick="logout()" class="logout-btn">Tho√°t</button>`;
        }
        
        google.accounts.id.initialize({
            client_id: "841259510226-c0lbbdn4vp2ummrcrsa9tups6d2mon4v.apps.googleusercontent.com",
            callback: handleCredentialResponse
        });
        google.accounts.id.renderButton(document.getElementById("buttonDiv"), { theme: "outline", size: "large" });
    };
</script>

</html>